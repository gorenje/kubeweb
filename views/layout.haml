%html
  %head
    %link{:href => "https://cdn.datatables.net/v/bs4/dt-1.10.16/datatables.min.css", :rel => "stylesheet"}
    %link{:href => "https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css", :rel => "stylesheet"}
    %script{:src => "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"}
    %script{:src => "https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"}
    %script{:src => "https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"}
    %script{:src => "https://cdn.datatables.net/v/bs4/dt-1.10.16/datatables.min.js"}
    %script{:src => "https://cdnjs.cloudflare.com/ajax/libs/highcharts/6.0.7/highcharts.js"}
    %script{:src => "/js/app.js"}
    %title= @title || 'KubeWeb'
  %body
    :css
      .highlight {
        color: #a40;
      }
    :javascript
      $(document).ready(function() {
        $('a._log, a._shell, a._desc').click(function(event){
          $.get($(event.target).attr('href')).fail(NotApp);
          return false;
        });

        $('#navmenu').find('a').removeClass('highlight');

        var location = window.location.pathname.split("/")[1]
        $('#navmenu')
        .find('a')
        .filter(function(_,e) {
          return $(e).text().toLowerCase() === location
        })
        .addClass('highlight');
      })

    .row.border-bottom.pb-2.pt-2.mr-2.ml-2
      #navmenu.col-4.text-left
        - (Cmpnts + ["top"]).each do |v|
          %a{ :href => "/#{v}" }= v.capitalize
          = "|"
      .col-4.text-center KubeWeb
      .col-4.text-right
        %a{ :href => "/_cfg" } Config
        = "|"
        %a{ :href => "/_graph" } Graphs
        = "|"
        %a{ :href => "/_busybox" } Busybox
    .row.pt-2
      .col-12= yield
